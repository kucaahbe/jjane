<% content_tag :li, :id => dom_id(page), :class => dom_class(page.class) do %>

  <% content_tag :div, :style => "padding-left:#{10 * page.level}px;", :class => :list_item, :onmouseover =>"$('show_#{page.id}').show()", :onmouseout => "$('show_#{page.id}').hide()" do %>
    <div style="float:left">
      <%= published_img(page) %>
      <%= link_to page.link, edit_page_path(page) %>
      &nbsp; &nbsp;
      <%= link_to "(#{t(:page_show)})", root_url+page.url, :style => 'display:none; color:black;', :id => "show_#{page.id}" %>
    </div>

    <div style="float:right; margin-left:20px;">
      <%= link_to_new new_page_child_path(page) %>
      <%= link_to_destroy page %>
    </div>

    <div style="float:right;">
      <% remote_form_for page, :html => { :style => 'margin:0;'} do |f| %>
	<% @menus_columns.each do |column| %>
	  <%= f.check_box column.to_sym, :id => column+'_'+page.id.to_s, :onclick => "this.form.onsubmit();" %>
	<% end %>
      <% end %>
    </div>

    <div style="clear:both"></div>
  <% end %>

  <% if page.have_children? %>
    <% content_tag :ul do %>
      <% page.children.each do |child| %>
	<%= partial 'tree_item', :page => child %>
      <% end %>
    <% end %>
  <% end %>

<% end %>
