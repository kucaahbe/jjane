<%= title 'Sorting pages' %>

<% content_for :head do -%>
  <script type="text/javascript">
    //<![CDATA[
  $(function() {
      $('#sortable_pages').sortable({ 
cursor: 'move',
handle:'.mover',
helper: 'clone',
grid: [21, 20]
	 });
      });
//]]>
</script>
<style type="text/css">
  #sortable_pages li {border-bottom:1px solid black;padding:5px;}
  #sortable_pages li span {display:inline-block;}
</style>
<% end -%>

<ul class="jjane" id="sortable_pages">
  <%- @pages.each do |p| -%>
    <% content_tag :li, :id => "page_#{p[:page].id}", :class => %[level_#{p[:level]} lft_#{p[:page].lft} rgt_#{p[:page].rgt}] do %>
      <%= content_tag :span, '',
	:style => "width:#{20*p[:level]}px;",
      :id => "page_mover_#{p[:page].id}" -%>
      <%= engine_image 'arrow_inout.png', :class => 'mover' %>
      <%= p[:page].menu %>
    <% end %>
  <%- end -%>
</ul>
